{% extends 'base.html.twig' %}

{% block title %}Historique des commandes - SNIW , centrale d'achat export.{% endblock %}

{% block stylesheet %}

    <link rel="stylesheet" type="text/css" href="/styles/font-awesome/all.css">
{% endblock %}


{% block body %}
    <body>
    <div class="background">
        <div class="columns-container container carriere-container">
            <div class="rte">


                <div class="breadcrumbs d-flex flex-row align-items-center">
                    <ul>
                        <li><a href="{{ path('home') }}">Home</a></li>
                        <li><i class="fa fa-angle-right" aria-hidden="true"></i><a href="{{ path('commandes_type') }}">Commandes types </a></li>

                        <li class="active"><i class="fa fa-angle-right" aria-hidden="true"></i>Détails</li>

                    </ul>
                </div>
                <h2> Détail de la commande type  </h2>

                <table class="table mt-5 table-responsive">
                    <thead>
                    <tr style="text-align:center">
                        <th style="width:100px"> Produit </th>
                        <th>Référence</th>
                        <th>Description</th>
                        <th>Nb de carton(s)</th>
                        <th> Prix / Carton</th>
                        <th> Prix Total</th>
                        <th> Ajouter panier</th>

                    </tr>
                    </thead>
                    <tbody>

                    {% for produit in commande.commande.produit  %}
                        <tr style="text-align:center">
                            <td>
                                {% if produit.image|length > 0 %}
                                    <img src="{{ asset('produits/images/' ~ produit.image) }}" style="width:100%;" alt="{{ produit.nom }}">
                                {% else %}
                                    <img src="http://{{ produit.imageImport }}" style="width:90%;" alt="{{ produit.nom }}">
                                {% endif %}



                            </td>
                            <td> {{ produit.reference }} </td>
                            <td> {{ produit.nom }}</td>
                            <td> {{ produit.quantite }}</td>
                            <td> {{ produit.prixUnitaire|number_format(2,'.','') }}€</td>
                            {% set prixTotal = produit.prixUnitaire * produit.quantite %}
                            <td>  {{ prixTotal|number_format(2,'.','') }}€</td>

                            <td>
                                <ul class="navbar_user">
                                    <li class="checkout" style="margin-right:30px" >
                                        <a style="cursor:pointer" onclick="refreshAjax({{ produit.id }},'/ajouter/ajax/'+ {{ produit.id }})">
                                            <i class="fa fa-cart-plus" aria-hidden="true">
                                            </i>
                                        </a>
                                    </li>
                                </ul>
                            </td>
                        </tr>



                    {% endfor %}


                    </tbody>
                </table>



                {% include 'partiels/footer.html.twig' %}
            </div>
        </div>
    </div>
    </body>

    <script src="jquery-3.3.1.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>

    <script>

        function refreshAjax(id,changePath) {
            $.ajax({
                type: "POST",
                url: changePath,
                data : {
                },
                dataType: "json",
                success: function(response) {
                    let txt = parseInt($('#checkout_items').text());
                    $('#checkout_items').text(txt+1);
                }
            });
        }
    </script>

{% endblock %}





